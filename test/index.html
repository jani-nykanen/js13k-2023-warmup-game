<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="overflow: hidden; background-color: black;">
    <script>
function n(a){a.x=0;a.y=0}class p{constructor(a=0,b=0){this.g=()=>new p(this.x,this.y);this.x=a;this.y=b}};const t=()=>{let a,b;b=document.createElement("canvas");b.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");b.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;");b.width=144;b.height=192;a=document.createElement("div");a.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");a.appendChild(b);document.body.appendChild(a);return[b,b.getContext("2d")]};
function u(a){var b=window.innerWidth,c=window.innerHeight;let d=Math.min(b/a.width,c/a.height);1<d&&(d|=0);a.g.style.width=String(d*a.width|0)+"px";a.g.style.height=String(d*a.height|0)+"px";a.g.style.left=String(b/2-d*a.width/2|0)+"px";a.g.style.top=String(c/2-d*a.height/2|0)+"px"}function v(a,b){a.l=b}function w(a,b,c){let d=a.K;b+=a.C.x;c+=a.C.y;b|=0;c|=0;for(a=-24;24>=a;++a){var e=a/24;e=Math.round(24*Math.sqrt(1-e*e));0>=e||d.fillRect(b-e,c+a,2*e,1)}}
function y(a,b,c,d,e=0,g=0,f=b.width,h=b.height){let k=a.K,l=0!=a.P||0!=a.R;void 0!=b&&(c+=a.C.x,d+=a.C.y,e|=0,g|=0,f|=0,h|=0,c|=0,d|=0,l&&k.save(),0!=a.R&&(k.translate(c+f/2,d+h/2),k.rotate(a.R*Math.PI/2),c=-f/2,d=-h/2),0!=(a.P&1)&&(k.translate(f,0),k.scale(-1,1),c*=-1),0!=(a.P&2)&&(k.translate(0,h),k.scale(1,-1),d*=-1),k.drawImage(b,e,g,f,h,c,d,f,h),l&&k.restore())}
function z(a,b,c,d,e,g=0){if(void 0!=b){var f=b.width/16|0,h=e;e=d-=c.length*(f+g)/2;for(let l=0;l<c.length;++l){var k=c.charCodeAt(l);10==k?(e=d,h+=f+0):(k-=32,y(a,b,e,h,k%16*f,(k/16|0)*f,f,f),e+=f+g)}}}function A(a,b,c){switch(b){case "flip":a.P=c;break;case "rotation":a.R=c}}function B(a,b=1){a.K.globalAlpha=b}
class C{constructor(){this.R=this.P=0;this.h="ffffffff";this.l=void 0;this.L=a=>this.l(a);this.width=144;this.height=192;[this.g,this.K]=t();this.K.imageSmoothingEnabled=!1;this.C=new p;window.addEventListener("resize",()=>{u(this)});u(this)}clear(a){let b=this.K;b.fillStyle=a;b.fillRect(0,0,this.width,this.height);b.fillStyle=this.h}fillColor(a){this.K.fillStyle=this.h=a}fillRect(a,b,c,d){let e=this.K;a+=this.C.x;b+=this.C.y;e.fillRect(a|0,b|0,c|0,d|0)}moveTo(a=0,b=0){this.C.x=a;this.C.y=b}move(a,
b){this.C.x+=a;this.C.y+=b}};const D=a=>{let b=[],c;for(let d=0;d<a.length;++d){c=a[d].length/2|0;b.push(Array(c));for(let e=0;e<c;++e)b[d][e]=parseInt(a[d].substring(2*e,2*e+2),16)}return b},E=(a,b,c,d,e,g)=>{let f,h;for(let k=c;k<c+8;++k)for(let l=b;l<b+8;++l){h=k*d+l;f=g[e[a.data[4*h]/85|0]];for(let m=0;4>m;++m)a.data[4*h+m]=f[m]}},aa=(a,b,c,d=128)=>{for(let e=0;e<c;++e){for(let g=0;3>g;++g)a.data[4*e+g]=b[g];a.data[4*e+3]=a.data[4*e+3]<d?0:255}},ba=(a,b,c,d)=>{let e=document.createElement("canvas"),g=e.getContext("2d");e.width=
a.width;e.height=a.height;g.drawImage(a,0,0);let f=g.getImageData(0,0,a.width,a.height),h=e.width/8|0,k=e.height/8|0;a=a.width;let l=D(d),m=0;for(let q=0;q<Math.min(q+k,b+1);++q)for(let r=0;r<h;++r)m>=c.length||(d=c[m].split("").map(x=>parseInt(x,32)),E(f,8*r,8*q,a,d,l),++m);g.putImageData(f,0,0);return e},ca=(a,b,c,d=!1,e=128,g=[255,255,255])=>{let f=document.createElement("canvas"),h=f.getContext("2d");f.width=a;f.height=b;c(h,a,b);d&&(h.drawImage(f,0,0),c=h.getImageData(0,0,f.width,f.height),aa(c,
g,a*b,e),h.putImageData(c,0,0));return f};function F(a,b,c){a.keys.get(b)!==c-2&&(a.keys.set(b,c),a.g||(a.g=!!(c&1)))}function I(a,b){let c=0;b=a.actions.get(b);if(void 0==b)return 0;for(let d of b.keys)if(0!=(c=a.keys.get(d)))break;return c}
class da{constructor(a){this.g=!1;this.keys=new Map;this.h=[];this.actions=a;for(let b of a.keys())for(let c of a.get(b).keys)this.h.push(c),this.keys.set(c,0);window.addEventListener("keydown",b=>{this.h.includes(b.code)&&b.preventDefault();F(this,b.code,3)});window.addEventListener("keyup",b=>{this.h.includes(b.code)&&b.preventDefault();F(this,b.code,2)})}update(){let a;for(let b of this.keys.keys())1<(a=this.keys.get(b))&&this.keys.set(b,a-2);this.g=!1}};function J(a,b,c){a.h=b;a.speed=1/30;a.g=1;a.l=c;a.i=1;a.active=!0}class ea{constructor(){this.g=1;this.h=!1;this.i=0;this.active=!1;this.speed=1;this.l=()=>{};this.isActive=()=>this.active}update(a){this.active&&0>=(this.g-=this.speed*a.step)&&((this.h=!this.h)?(this.active=!1,this.g=0):(this.g+=1,null!=this.l&&this.l(a)))}A(a){if(this.active&&0!=this.i){var b=this.g;this.h&&(b=1-b);switch(this.i){case 1:a.clear("rgba(0, 0, 0, "+String(b)+")")}}}};function K(a,b,c,d,e){var g=fa;++a.l;let f=new Image;f.onload=()=>{++a.loaded;a.g.set(b,ba(f,d,e,g))};f.src=c}function L(a,b,c,d,e,g=!1,f=128,h=[255,255,255]){c=ca(c,d,e,g,f,h);a.g.set(b,c)}class ha{get B(){return this.h.width}get O(){return this.h.height}constructor(a,b){this.loaded=this.l=0;this.step=1;this.i=()=>this.loaded>=this.l;this.input=new da(a);this.transition=new ea;this.g=new Map;v(b,c=>this.g.get(c));this.h=b}};function M(a,b){let c=a.g.i();a.h+=Math.min(b-a.o,83.33335);a.o=b;c&&!a.m&&(a.i?.ea(a.g),a.m=!0);for(b=!0;16.66667<=a.h;a.h-=16.66667)c&&(a.i?.update(a.g),a.g.transition.update(a.g)),b&&(a.g.input.update(),b=!1);c?(a.i?.fa(a.l),a.g.transition.A(a.l)):a.l.clear("rgb(0, 85, 170)");window.requestAnimationFrame(d=>M(a,d))}
class ia{constructor(){var a=new Map([["left",{keys:["ArrowLeft"]}],["right",{keys:["ArrowRight"]}],["up",{keys:["ArrowUp"]}],["down",{keys:["ArrowDown"]}],["jump",{keys:["Space","KeyZ","ArrowUp"]}],["start",{keys:["Enter"]}]]);this.o=this.h=0;this.i=void 0;this.m=!1;this.l=new C;this.g=new ha(a,this.l)}};const fa="00000000 000000ff 555555ff aaaaaaff ffffffff aa5555ff ffaa55ff 55aa00ff aaff00ff ffaa00ff ffff55ff 5555aaff aaaaffff aa0000ff 005500ff 0055aaff 55aaffff".split(" "),ja="1078 1078 1560 1560 1560 0FG4 1560 1560 1340 1D60 1560 1D90 19A0 19A0 19A0 19A0 14C0 14C0 19A0 19A0 19A0 19A0 1BC0 1BC0 14C0 14C0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 14D0 19D0 14D0 14D0 1BC0 14C0 14D0 14D0 0400 0400 1D00 1D00 1430 1230 1870 1E70 1D00 1D00 1230 1230 1E70 1E70 000A 000A 000A 000A 000A 000A".split(" "),
ka=(a,b,c)=>{let d=b/(b/6);a.clearRect(0,0,b,c);a.fillStyle="#ffffff";for(let f=0;f<b;++f){var e=Math;var g=f/b;e=c/2+e.ceil.call(e,10*(1-Math.abs(Math.sin(g*d*Math.PI))+Math.sin(g*Math.PI*2)));a.fillRect(f,e,1,c-e)}},la=(a,b,c)=>{a.font="bold 18px Arial";a.textAlign="center";a.fillStyle="#ffffff";a.fillText("Game Over!",b/2,c-2)};function N(a,b=!1){var c=a.width/2;let d=Math.random()*c|0,e=b?1:2*Math.random()|0,g=0;for(let f=0;f<a.width;++f)1==e&&++g,a.h[f]=e,a.l[f]=!1,0>=--d&&(d+=Math.random()*c+1|0,1==e?(e=b||.5>Math.random()?2:0,!b&&f+d>=a.width-1&&(e=0)):e=1);if(!b)for(b=Math.random()*g/2|0,c=Math.random()*c|0;c<a.width&&!(1==a.h[c]&&.25>Math.random()&&(a.l[c]=!0,0>=--b));++c);}
class O{constructor(a,b,c=!1,d=!1){this.i=!1;this.N=()=>this.g;this.$=e=>{var g=this.width;return this.h[(e%g+g)%g]};this.Z=e=>{var g=this.width;return this.l[(e%g+g)%g]};this.g=a;this.width=b;this.h=Array(b);this.l=Array(b);d?this.h.fill(0):N(this,c);this.i=c||d}update(a,b){this.g+=a*b.step;return this.g>b.O+48?(this.g-=b.O+96,N(this),this.i=!1,!0):!1}A(a,b){let c=Math.round(this.g);var d;for(let f=0;f<this.width;++f){A(a,"flip",0);var e=this.h[f];if(0!=e)if(2==e)for(e=0;2>e;++e)y(a,b,16*f+8*e,c+
-5,32,0,8,16);else{if(this.l[f])for(d=0;2>d;++d)y(a,b,16*f+8*d,c-8,16,8,8,8);var g=0==f?1:this.h[f-1];d=f==this.width-1?1:this.h[f+1];g=g!=e?8:0;y(a,b,16*f,c,g,0,8,8);y(a,b,16*f,c,g+16,0,8,8);y(a,b,16*f,c+8,g,8,8,8);g=d!=e?8:0;d!=e&&A(a,"flip",1);y(a,b,16*f+8,c,g,0,8,8);y(a,b,16*f+8,c,g+16,0,8,8);y(a,b,16*f+8,c+8,g,8,8,8)}}}W(a,b,c){if(!a.T()&&a.V()){var d=new p(8,4),e=new p;for(let f=0;f<this.width;++f)if(0!=this.h[f]){if(this.l[f]){var g=new p(16*f+8-4,this.g-2);if(a.da(g,e,d))return P(a,16*f+8),
!0}Q(a,16*f,this.g,16,b,c)}return!this.i&&a.N().y+8<this.g?this.i=!0:!1}}};function R(a,b,c,d){a.g+=b;b=Math.min(c,d);c=Math.max(c,d);a.g<b?a.g=c:a.g>c&&(a.g=b)}function U(a,b,c,d,e){let g=Math.sign(c-b);if(0>=d)R(a,g,b,c);else for(a.h+=e;a.h>=d;)a.h-=d,R(a,g,b,c)}class ma{constructor(){this.h=this.g=0;this.l=()=>this.g}};function Q(a,b,c,d,e,g,f=!1,h=0){if(a.h||!a.g)return!1;let k=a.j.y+a.F.y+a.D.y/2;e=k+(a.speed.y+e)*g.step;if(!(h=a.speed.y<h)){a:{let l;for(let m=-1;1>=m;++m)if(h=a.j.x+a.F.x-a.D.x/2+g.B*m,l=h+a.D.x,l>=b&&h<b+d){b=!0;break a}b=!1}h=!b}return h?!1:k<c+2&&e>c-2?(a.j.y=c-(a.F.y+a.D.y/2),f||(a.speed.y=0),a.ba(f),!0):!1}
class V{constructor(a=0,b=0,c=!1){this.h=!1;this.V=()=>this.g;this.T=()=>this.h;this.da=(d,e,g)=>this.g&&this.j.x+this.F.x+this.D.x/2>=d.x+e.x-g.x/2&&this.j.x+this.F.x-this.D.x/2<=d.x+e.x+g.x/2&&this.j.y+this.F.y+this.D.y/2>=d.y+e.y-g.y/2&&this.j.y+this.F.y-this.D.y/2<=d.y+e.y+g.y/2;this.ca=d=>this.da(d.j,d.F,d.D);this.N=()=>this.j.g();this.j=new p(a,b);this.speed=new p;this.target=new p;this.u=new p(1,1);this.F=new p;this.D=new p;this.l=new ma;this.g=c}U(){}Y(){return!0}update(a,b){if(this.g){this.h?
this.Y(b)&&(this.g=!1):this.U(a,b);var c=this.speed.x,d=this.target.x,e=this.u.x*b.step;this.speed.x=c<d?Math.min(d,c+e):Math.max(d,c-e);c=this.speed.y;d=this.target.y;e=this.u.y*b.step;this.speed.y=c<d?Math.min(d,c+e):Math.max(d,c-e);this.j.x+=this.speed.x*b.step;this.j.y+=(this.speed.y+1*a)*b.step}}A(){}ba(){}}function W(a,b){for(let c of a)if(!c.V())return c;return a[a.push(new b.prototype.constructor)-1]};class na extends V{constructor(){super(0,0,!1);this.i=0;this.D=new p(12,12)}U(a,b){U(this.l,0,3,6,b.step);this.j.y-8>b.O&&(this.g=!1)}Y(a){return 12<=(this.i+=a.step)}X(a,b){this.j=new p(a,b);this.j=this.j.g();this.l.g=0;this.h=!1;this.g=!0}A(a,b){if(this.g)if(this.h){var c=.25+this.i/12*.75;B(a);a.fillColor("#ffff00");b=this.j.x;var d=this.j.y,e=c*c*16;c*=16;var g=a.K;if(!(e>=c))for(b+=a.C.x,d+=a.C.y,b|=0,d|=0,a=-c;a<=c;++a){var f=a/c;f=Math.round(Math.sqrt(1-f*f)*c);if(!(0>=f)){var h=0;Math.abs(a)<
e&&(h=a/e,h=Math.round(Math.sqrt(1-h*h)*e));0>=h?g.fillRect(b-f,d+a,2*f,1):(g.fillRect(b-f,d+a,f-h,1),g.fillRect(b+h,d+a,f-h,1))}}}else d=this.l.l(),e=[0,16,24,16][d],c=[16,8,8,8][d],g=Math.round(this.j.x)-c/2,f=Math.round(this.j.y)-8,A(a,"flip",3==d?1:0),y(a,b,g,f,e,16,c,16),a.P=0,a.R=0}W(a){return!this.g||this.h||a.T()||!a.V()?!1:this.ca(a)?(this.h=!0,this.i=0,!0):!1}};function P(a,b){a.h=!0;a.l.g=0;a.speed.x=.25*(a.j.x-b);a.speed.y=-4;a.target.x=0;a.u.x=.025}
function X(a,b,c,d=0){if(a.g){var e=a.l.l();d=Math.round(a.j.x)-8+d;var g=Math.round(a.j.y)-8+1;A(b,"flip",a.H);if(a.h)A(b,"rotation",a.l.l()),y(b,c,d,g,32,16,16,16);else if(6<=e)e-=6,1==a.H&&(e=3-e),A(b,"rotation",e),y(b,c,d,g,0,48,16,16);else{var f=6+a.s;1==a.H&&(f-=4);y(b,c,d,g,[32,0,0,0,0,0][e],[16,32,32,32,32,32][e],16,8);y(b,c,d,g+8,[32,16,32,16,32,0][e],[24,32,32,40,40,40][e],16,8);y(b,c,d+f,g+5,24,8,8,8)}b.P=0;b.R=0}}
class oa extends V{constructor(a=0){super(a,88,!0);this.o=this.s=this.H=0;this.v=!1;this.i=0;this.G=this.m=this.I=!1;this.J=0;this.u=new p(.15,.15);this.D=new p(8,12);this.F.y=2}U(a,b){a:{var c=0;0!=(I(b.input,"right")&1)?c=1:0!=(I(b.input,"left")&1)&&(c=-1);0!=c&&(this.s=c);this.target.x=1.5*c;this.target.y=2;c=I(b.input,"down");let d=I(b.input,"jump");this.G||3!=c||this.v||(this.G=!0,this.m=!1);if(this.G)if(0==(c&1))this.G=!1;else{this.speed.y=4;this.target.y=4;this.i=0;this.m=!1;break a}if(this.m){if(1==
(d&1)){this.i+=8;this.m=!1;break a}1==c&&(this.J=this.i+8,this.i=0,this.m=!1)}(0<this.o||this.I)&&3==d?(this.i=0<this.o?20:12,this.v=!1,this.I=0<this.o,this.o=0):this.m||0!=(d&1)||(this.i=0)}0<this.i&&(this.speed.y=-(2+a),this.i-=b.step,0>=this.i&&(this.m=!1));0<this.J&&(this.speed.y=-(2+a),0>=(this.J-=b.step)&&(this.m=!1));0<this.o&&(this.o-=b.step);a=Math.abs(this.speed.x);0!=this.s&&(this.H=1==this.s?0:1);this.v?.01>a?this.s=this.l.g=0:U(this.l,1,4,10-4*a,b.step):!this.I&&-1>this.speed.y?U(this.l,
6,9,3,b.step):this.l.g=5;0>this.j.x?this.j.x+=b.B:this.j.x>b.B&&(this.j.x-=b.B);this.j.y>b.O+8&&P(this,this.j.x);this.v=!1}ba(a){this.m=a;this.G=!1;this.I=!0;a?this.i=8:(this.v=!0,this.o=8)}Y(a){U(this.l,0,3,4,a.step);this.target.y=8;return this.j.y>=a.O+8}A(a,b){8>this.j.x?X(this,a,b,a.width):this.j.x>=a.width-8&&X(this,a,b,-a.width);X(this,a,b)}};class pa extends V{constructor(){super(0,0,!1);this.m=this.i=this.I=this.H=this.G=this.o=this.J=0;this.s=!0;this.v=!1;this.aa=void 0;this.u.y=.1;this.D=new p(8,8)}Y(a){this.target.y=6;return this.j.y-8>a.O}U(a,b){if(this.j.y-8>b.O)this.g=!1;else{var c=[0,.5,.33,0,0],d=this.aa?.N()-8;this.v=-8>this.j.y;switch(this.o){case 2:case 1:this.speed.x=a*c[this.o]*this.i;this.target.x=this.speed.x;this.G=1==this.i?1:0;break;case 3:this.s?0<=this.j.y&&30<=(this.m+=b.step)&&(this.speed.y=-2.5,this.target.y=4,
this.s=!1,this.m-=30):0<this.speed.y&&this.j.y>=d&&this.j.y<d+16&&(this.j.y=d,n(this.speed),n(this.target),this.s=!0);break;case 4:if(!(-8>this.j.y))if(0<this.m)this.v=!0,this.speed.x=0,this.m-=a*b.step,0>=this.m&&(this.speed.x=0,this.target.x=10*this.i);else if(this.u.x=.015*(a+1),0<this.i&&this.j.x>=b.B+8||0>this.i&&-8>this.j.x)this.g=!1}0>this.speed.x&&this.j.x<this.H&&(this.speed.x*=-1,this.i*=-1,this.j.x=this.H);0<this.speed.x&&this.j.x>this.I&&(this.speed.x*=-1,this.i*=-1,this.j.x=this.I);c=
[0,6,10,0,4];d=2*Math.PI/60;switch(this.o){case 2:this.m=(this.m+d*b.step)%(2*Math.PI),this.J=Math.round(2*Math.sin(this.m));case 1:U(this.l,0,1,c[this.o]-2*a|0,b.step);break;case 4:U(this.l,0,1,c[4],b.step);break;case 3:this.l.g=1,!this.s&&.5<Math.abs(this.speed.y)&&(this.l.g=0<this.speed.y?2:0)}}}X(a,b,c,d,e=a,g=a){this.j=new p(a,b.N()+[0,-8,-16,-8,0][c]);this.J=0;n(this.speed);n(this.target);this.l.g=0;this.o=c;this.H=e;this.I=g;this.aa=b;this.s=!0;3!=c&&(this.i=.5>Math.random()?-1:1,this.G=1==
this.i?1:0);4==c&&(this.m=150*Math.random()|0,this.j.x=0<this.i?-8:d.B+8,this.j.y-=16);this.v=!1;this.g=!0;this.h=!1}A(a,b){if(this.g){var c=this.l.l(),d=Math.round(this.j.x)-8,e=Math.round(this.j.y)-8+this.J;var g=this.G;var f=0;this.h&&(g|=2,f=1);A(a,"flip",g);switch(this.o){case 1:g=0==c?16:32;c=0==c?56:48;y(a,b,d,e+1+8*f,16,48,16,8);y(a,b,d,e+1+8*(1-f),g,c,16,8);break;case 2:y(a,b,d,e+4,0,0==c?64:72,16,8);break;case 3:a.fillColor("#000000");y(a,b,d,e+2,32,64,16,16);e+=c-1;y(a,b,d,e+4+5*f,32,56,
16,8);y(a,b,d+4,e+7-f,24,8,8,8);e+=c-1+4*f;a.fillRect(d+5,e+8,1,1);a.fillRect(d+10,e+8,1,1);break;case 4:y(a,b,d,e+2-4*f,16,64,16,16),1!=c||this.h||y(a,b,d+4-12*this.i,e+4,40,8,8,8)}a.P=0;a.R=0}}W(a,b,c){return!this.g||!a.V()||this.h||a.T()||this.v?!1:Q(a,this.j.x+this.F.x-10,this.j.y+-6,20,b,c,!0,-1)?(this.h=!0,n(this.speed),n(this.target),this.speed.y=1,!0):a.ca(this)?(P(a,this.j.x),!0):!1}};class qa extends V{constructor(){super(0,0,!1);this.size=this.i=0;this.color="#ffffff";this.u.y=.25}X(a,b,c,d,e="#ffffff"){this.j=new p(a,b);this.j=this.j.g();this.speed=new p(c,d);this.target=new p(c,8);this.i=0;this.color=e;this.size=1+(4*Math.random()|0);this.g=!0}U(a,b){120<=(this.i+=b.step)?this.g=!1:this.j.y>b.O+8&&(this.g=!1)}A(a){if(this.g){var b=Math.round(this.j.x),c=Math.round(this.j.y),d=this.size+1;B(a,Math.max(0,1-this.i/120));a.fillColor(this.color);a.fillRect(b-d/2,c-d/2,d,d);B(a)}}}
;function Y(a,b,c){let d=2*Math.PI/12,e=d/2,g,f;for(let h=0;12>h;++h)f=1+3*Math.random(),g=e+h*d,W(a.m,qa).X(b.x,b.y,Math.cos(g)*f,Math.sin(g)*f+-3,c)}
class ra{constructor(a){this.u=0;this.s=()=>this.g.T();this.o=[];for(let b=0;6>b;++b)this.o[b]=new O(48*b,a.B/16|0,2==b,2<b);this.l=[];this.h=[].fill(!1);this.i=[];this.m=[];this.g=new oa(a.B/2)}update(a,b,c,d){for(var e of this.m)e.update(b,d);for(var g of this.l)g.update(b,d),g.W(this.g,d)&&(c.M+=1);for(var f of this.i)f.update(b,d),f.W(this.g,b,d)&&(this.g.T()?Y(this,this.g.N(),"#ffffff"):(Y(this,f.N(),"#aa0000"),c.M+=1));for(let x of this.o)if(x.W(this.g,b,d)&&(this.g.T()?Y(this,this.g.N(),"#ffffff"):
c.S+=(c.M+10)/10*10|0),x.update(b,d)){var h=a;e=x;g=d;for(f=0;f<this.h.length;++f)this.h[f]=!1;var k;f=e;var l=[.25,.5,.2,.05];var m=Math.random(),q=l[0];for(k=0;k<l.length&&!(m<q);++k)k<l.length-1&&(q+=l[k+1]);q=k;if(0!=q){m=g.B/16|0;for(var r=0;r<q;++r){k=l=Math.random()*m|0;do{if(!this.h[k]&&!f.Z(k)){W(this.l,na).X(16*k+8,f.N()-24+8);this.h[k]=!0;break}k=(k+1)%m}while(k!=l)}}l=f=void 0;h=Math.min(1,h/7200);k=[.5,.3,.05,.15,0];m=[.2,.2,.2,.2,.2];r=Math.random();let G=k[0],H=m[0],S=Math.min(k.length,
m.length),T=(1-h)*G+h*H;for(q=0;q<S&&!(r<T);++q)q<S-1&&(G=k[q+1],H=m[q+1],T+=(1-h)*G+h*H);h=q;if(0!=h){k=g.B/16|0;m=q=Math.random()*k|0;do{if(!this.h[m]&&(2==h||0!=e.$(m)&&!e.Z(m))){if(1==h){for(l=m;0<=l&&0!=e.$(l)&&!e.Z(l);--l);for(f=m;f<=k-1&&0!=e.$(f)&&!e.Z(f);++f);[l,f]=[l,f];2==Math.abs(l-f)&&(h=3)}else 2==h&&(l=-1,f=k);W(this.i,pa).X(16*m+8,e,h,g,16*(l+1),16*f);break}m=(m+1)%k}while(m!=q)}}this.g.update(b,d);this.u=(this.u+.125*d.step)%d.B;return!this.g.V()}A(a){let b=a.L("bmp1");for(let c of this.o)c.A(a,
b);for(let c of this.m)c.A(a,b);for(let c of this.i)c.A(a,b);for(let c of this.l)c.A(a,b);this.g.A(a,b)}};function Z(a){if(!(a.S<a.g)){a.g=a.S;try{window.localStorage.setItem("js13kwarmup__hiscore",String(a.g))}catch(b){console.log("Could not access the local storage: "+String(b))}}}class sa{constructor(){this.g=this.M=this.S=0;this.l=()=>this.S;this.h=()=>this.g;let a=0;try{a=Number(window.localStorage.getItem("js13kwarmup__hiscore"))}catch(b){console.log("Could not access the local storage: "+String(b))}this.g=a}};function ta(a,b){a.v=a.i.s()?0:60>a.h?.5:Math.min(2,.5+.25*Math.floor((a.h-60)/1800));a.m=a.v>a.m?Math.min(a.v,a.m+.01*b.step):Math.max(a.v,a.m-.01*b.step)}
class ua{constructor(a){this.m=0;this.v=.5;this.o=this.h=0;this.u=this.s=!1;this.l=0;K(a,"bmp1","bitmap1.png",10,ja);K(a,"font","font.png",3,Array(64).fill("0004"));K(a,"fontYellow","font.png",3,Array(64).fill("000A"));L(a,"clouds",a.B,80,ka);L(a,"gameover",112,20,la,!0,192,[255,0,0]);this.i=new ra(a);this.g=new sa}ea(a){J(a.transition,!1,null)}update(a){if(!a.transition.isActive()){var b=3==I(a.input,"start");b&&!this.u&&(this.s=!this.s);this.s||(this.h+=a.step,ta(this,a),this.i.update(this.h,this.m,
this.g,a),0<this.o&&(this.o-=a.step),this.u?(this.l+=a.step,b&&J(a.transition,!0,c=>{var d=this.g;d.S=0;d.M=0;d=this.i;for(var e=0;6>e;++e)d.o[e]=new O(48*e,c.B/16|0,2==e,2<e);for(var g of d.l)e=g,e.h=!1,e.g=!1;for(var f of d.i)g=f,g.h=!1,g.g=!1;for(var h of d.m)f=h,f.h=!1,f.g=!1;h=d.g;c=c.B/2;h.H=0;h.s=0;h.o=0;h.v=!1;h.i=0;h.I=!1;h.m=!1;h.G=!1;h.J=0;h.j=new p(c,88);h.speed=new p;h.target=new p;h.g=!0;h.h=!1;h.l.g=0;h.u.x=.15;d.h.fill(!1);this.o=this.m=this.h=0;this.u=!1;this.l=0})):!this.u&&this.i.s()&&
(Z(this.g),this.u=!0,this.h=0,this.o=30,Z(this.g)))}}fa(a){var b=this.i,c=a.L("clouds"),d=a.L("bmp1"),e=a.height-120;a.clear("#55aaff");a.fillColor("#aaffff");w(a,112,64);a.fillColor("#55aaff");w(a,100,52);for(var g=0;2>g;++g)y(a,c,-(b.u|0)+g*c.width,e);e+=c.height;for(b=0;b<a.width/8;++b)y(a,d,8*b,e,40,0,8,8);e+=8;a.fillColor("#0055aa");a.fillRect(0,e,a.width,a.height-e);0<this.o&&a.move(4*(2*Math.random()-1),4*(2*Math.random()-1));this.i.A(a);a.moveTo();if(this.i.s()){d=a.L("gameover");g=a.L("font");
var f=a.L("fontYellow");e=a.width/2-d.width/2;b=a.height/2-d.height/2+-32;c=1;30>this.l&&(c=this.l/30);a.clear("rgba(0, 0, 0,"+String(.67*c)+")");if(30>this.l){c=(1-c)*(1-c);g=a.K;f=1+16*c;let h,k;b+=d.height/2;for(let l=0;l<d.height;++l)h=32*Math.sin(4*Math.PI/d.height*l+2*c*Math.PI)*c,k=(l-d.height/2)*f,g.drawImage(d,0,l,d.width,1,e+h|0,b+k|0,d.width,1)}else 1==((this.l%60|0)/30|0)&&z(a,f,"PRESS ENTER",a.width/2,a.height/2+56,0),y(a,d,e,b),z(a,g,"SCORE: "+this.g.l(),a.width/2,a.height/2,0),z(a,
g,"HISCORE: "+this.g.h(),a.width/2,a.height/2+16,0)}else{d=a.L("font");b=a.L("bmp1");a.fillColor("rgba(0, 0, 0, 0.33)");a.fillRect(0,0,a.width,17);e=a.width/4;y(a,b,e-10,1,0,80,20,8);c=String(this.g.S);g="";for(f=0;f<6-c.length;++f)g+="0";z(a,d,g+c,e,8,-1);e+=a.width/2;y(a,b,e-10,1,24,80,21,8);b=this.g;c=b.M%10;z(a,d,"#"+String(1+(b.M-c)/10)+"."+c,e-4,8,-2)}this.s&&(d=a.L("font"),a.clear("rgba(0, 0, 0, 0.67)"),z(a,d,"GAME PAUSED",a.width/2,a.height/2-4,0))}};window.onload=()=>{var a=new ia,b=ua;void 0!=b&&(a.i=new b.prototype.constructor(a.g));M(a,0)};
    </script>
</body>
</html>
