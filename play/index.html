<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="overflow: hidden; background-color: black;">
    <script>
function n(a){a.x=0;a.y=0}class p{constructor(a=0,b=0){this.clone=()=>new p(this.x,this.y);this.x=a;this.y=b}};const r=()=>{let a,b;b=document.createElement("canvas");b.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");b.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;");b.width=144;b.height=192;a=document.createElement("div");a.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");a.appendChild(b);document.body.appendChild(a);return[b,b.getContext("2d")]};
function t(a){var b=window.innerWidth,c=window.innerHeight;let d=Math.min(b/a.width,c/a.height);1<d&&(d|=0);a.g.style.width=String(d*a.width|0)+"px";a.g.style.height=String(d*a.height|0)+"px";a.g.style.left=String(b/2-d*a.width/2|0)+"px";a.g.style.top=String(c/2-d*a.height/2|0)+"px"}function aa(a,b){a.l=b}function u(a,b,c,d){let e=a.H;b+=a.F.x;c+=a.F.y;b|=0;c|=0;for(a=-d;a<=d;++a){var f=a/d;f=Math.round(Math.sqrt(1-f*f)*d);0>=f||e.fillRect(b-f,c+a,2*f,1)}}
function ba(a,b,c=a.width/2,d=a.height/2){let e=a.H;var f=Math.max(0,d-b)|0;let g=Math.min(a.height,d+b)|0;0<f&&e.fillRect(0,0,a.width,f);g<a.height&&e.fillRect(0,g,a.width,a.height-g);for(let k=f;k<g;++k){var h=k-d;Math.abs(h)>=b?e.fillRect(0,k,a.width,1):(f=Math.round(c-Math.sqrt(b*b-h*h)),h=Math.round(c+Math.sqrt(b*b-h*h)),0<f&&e.fillRect(0,k,f,1),h<a.width&&e.fillRect(h,k,a.width-f,1))}}
function w(a,b,c,d,e=0,f=0,g=b.width,h=b.height){let k=a.H,l=0!=a.V||0!=a.U;void 0!=b&&(c+=a.F.x,d+=a.F.y,e|=0,f|=0,g|=0,h|=0,c|=0,d|=0,l&&k.save(),0!=a.U&&(k.translate(c+g/2,d+h/2),k.rotate(a.U*Math.PI/2),c=-g/2,d=-h/2),0!=(a.V&1)&&(k.translate(g,0),k.scale(-1,1),c*=-1),0!=(a.V&2)&&(k.translate(0,h),k.scale(1,-1),d*=-1),k.drawImage(b,e,f,g,h,c,d,g,h),l&&k.restore())}
function x(a,b,c,d,e,f=0,g=0,h=0){if(void 0!==b){var k=b.width/16|0,l=d;1==h?l=d-=c.length*(k+f)/2:2==h&&(l=d-=c.length*(k+f));for(let m=0;m<c.length;++m)h=c.charCodeAt(m),10==h?(l=d,e+=k+g):(h-=32,w(a,b,l,e,h%16*k,(h/16|0)*k,k,k),l+=k+f)}}function y(a,b=0){a.V=b}function z(a,b=0){a.U=b}function B(a,b=1){a.H.globalAlpha=b}
class ca{constructor(){this.U=this.V=0;this.h="ffffffff";this.l=void 0;this.B=a=>this.l(a);this.width=144;this.height=192;[this.g,this.H]=r();this.H.imageSmoothingEnabled=!1;this.F=new p;window.addEventListener("resize",()=>{t(this)});t(this)}clear(a){let b=this.H;b.fillStyle=a;b.fillRect(0,0,this.width,this.height);b.fillStyle=this.h}fillColor(a){this.H.fillStyle=this.h=a}fillRect(a,b,c,d){let e=this.H;a+=this.F.x;b+=this.F.y;e.fillRect(a|0,b|0,c|0,d|0)}moveTo(a=0,b=0){this.F.x=a;this.F.y=b}move(a,
b){this.F.x+=a;this.F.y+=b}};const da=a=>{let b=[],c;for(let d=0;d<a.length;++d){c=a[d].length/2|0;b.push(Array(c));for(let e=0;e<c;++e)b[d][e]=parseInt(a[d].substring(2*e,2*e+2),16)}return b},ea=(a,b,c,d,e,f)=>{let g,h;for(let k=c;k<c+8;++k)for(let l=b;l<b+8;++l){h=k*d+l;g=f[e[a.data[4*h]/85|0]];for(let m=0;4>m;++m)a.data[4*h+m]=g[m]}},fa=(a,b,c,d=128)=>{for(let e=0;e<c;++e){for(let f=0;3>f;++f)a.data[4*e+f]=b[f];a.data[4*e+3]=a.data[4*e+3]<d?0:255}},ha=(a,b,c,d)=>{let e=document.createElement("canvas"),f=e.getContext("2d");
e.width=a.width;e.height=a.height;f.drawImage(a,0,0);let g=f.getImageData(0,0,a.width,a.height),h=e.width/8|0,k=e.height/8|0;a=a.width;let l=da(d),m=0;for(let q=0;q<Math.min(q+k,b+1);++q)for(let v=0;v<h;++v)m>=c.length||(d=c[m].split("").map(A=>parseInt(A,32)),ea(g,8*v,8*q,a,d,l),++m);f.putImageData(g,0,0);return e},ia=(a,b,c,d=!1,e=128,f=[255,255,255])=>{let g=document.createElement("canvas"),h=g.getContext("2d");g.width=a;g.height=b;c(h,a,b);d&&(h.drawImage(g,0,0),c=h.getImageData(0,0,g.width,g.height),
fa(c,f,a*b,e),h.putImageData(c,0,0));return g};function C(a,b,c){a.keys.get(b)!==c-2&&(a.keys.set(b,c),a.g||(a.g=!!(c&1)))}function D(a,b){let c=0;b=a.actions.get(b);if(void 0==b)return 0;for(let d of b.keys)if(0!=(c=a.keys.get(d)))break;return c}
class ja{constructor(a){this.g=!1;this.keys=new Map;this.h=[];this.actions=a;for(let b of a.keys())for(let c of a.get(b).keys)this.h.push(c),this.keys.set(c,0);window.addEventListener("keydown",b=>{this.h.includes(b.code)&&b.preventDefault();C(this,b.code,3)});window.addEventListener("keyup",b=>{this.h.includes(b.code)&&b.preventDefault();C(this,b.code,2)});window.addEventListener("contextmenu",b=>b.preventDefault());window.addEventListener("mousemove",()=>window.focus());window.addEventListener("mousedown",
()=>window.focus())}update(){let a;for(let b of this.keys.keys())1<(a=this.keys.get(b))&&this.keys.set(b,a-2);this.g=!1}};class ka{constructor(){this.g=1;this.l=!1;this.j=0;this.active=!1;this.speed=1;this.isActive=()=>this.active}ca(a,b,c,d){this.l=a;this.speed=c;this.g=1;this.h=d;this.j=b;this.active=!0}update(a){this.active&&0>=(this.g-=this.speed*a.step)&&((this.l=!this.l)?(this.active=!1,this.g=0):(this.g+=1,void 0!=this.h&&this.h(a)))}v(a){if(this.active&&0!=this.j){var b=this.g;this.l&&(b=1-b);switch(this.j){case 1:a.clear("rgba(0, 0, 0, "+String(b)+")");break;case 2:var c=Math.max(Math.hypot(a.width/2,a.height/
2),Math.hypot(a.width-a.width/2,a.height/2),Math.hypot(a.width-a.width/2,a.height-a.height/2),Math.hypot(a.width/2,a.height-a.height/2));b=(1-b)*c;a.fillColor("black");ba(a,b)}}}};const E=(a,b,c)=>{let d=Math.random(),e=a[0],f=b[0],g,h=Math.min(a.length,b.length),k=(1-c)*e+c*f;for(g=0;g<h&&!(d<k);++g)g<h-1&&(e=a[g+1],f=b[g+1],k+=(1-c)*e+c*f);return g};class la{constructor(a,b,c=1,d="square",e=2,f=.5){this.l=void 0;this.g=a;this.gain=a.createGain();this.h=b.map(g=>Array.from(g));this.j=c;this.type=d;this.o=e;this.m=f}play(a){let b=this.g.currentTime,c=0,d=this.g.createOscillator();d.type=this.type;a*=this.j;try{"function"==typeof this.gain.gain.cancelAndHoldAtTime&&this.gain.gain.cancelAndHoldAtTime(b)}catch(e){}d.frequency.setValueAtTime(this.h[0][0],b);this.gain.gain.setValueAtTime(Math.max(Math.min(a,1),.01),b);c=0;for(let e of this.h){switch(this.o){case 0:d.frequency.setValueAtTime(e[0],
b+c);break;case 1:d.frequency.linearRampToValueAtTime(e[0],b+c);break;case 2:d.frequency.exponentialRampToValueAtTime(e[0],b+c)}c+=1/60*e[1]}this.gain.gain.exponentialRampToValueAtTime(a*this.m,b+c);d.connect(this.gain).connect(this.g.destination);d.start(b);d.stop(b+c);d.onended=()=>{d.disconnect()};this.l?.disconnect();this.l=d}};function F(a,b,c=1){if(a.g&&void 0!=b)try{b.play(c*a.la)}catch(d){a.h||(console.log("Audio error: "+d),a.h=!0)}}class ma{constructor(){this.h=!1;this.K=(a,b=1,c="square",d=2,e=.5)=>new la(this.l,a,b,c,d,e);this.l=new AudioContext;this.g=!0;this.la=.5}toggle(a=!this.g){return this.g=a}};function G(a,b,c,d,e){var f=na;++a.m;let g=new Image;g.onload=()=>{++a.loaded;a.h.set(b,ha(g,d,e,f))};g.src=c}function H(a,b,c,d,e,f=!1,g=128,h=[255,255,255]){c=ia(c,d,e,f,g,h);a.h.set(b,c)}function I(a,b){a.g=new b.prototype.constructor(a.g?.fa(),a);a.l=!1}function oa(a){a.l||(a.l=!0)}
class pa{get D(){return this.j.width}get T(){return this.j.height}constructor(a,b){this.loaded=this.m=0;this.g=void 0;this.l=!1;this.step=1;this.O=c=>this.o.get(c);this.u=()=>this.loaded>=this.m;this.A=()=>{this.g?.update(this)};this.s=c=>{this.g?.ha(c)};this.input=new ja(a);this.transition=new ka;this.audio=new ma;this.h=new Map;this.o=new Map;aa(b,c=>this.h.get(c));this.j=b}K(a,b,c=1,d="square",e=2,f=.5){b=this.audio.K(b,c,d,e,f);this.o.set(a,b)}};function J(a,b){let c=a.g.u();a.h+=Math.min(b-a.j,83.33335);a.j=b;c&&oa(a.g);for(b=!0;16.66667<=a.h;a.h-=16.66667)c&&(a.g.A(),a.g.transition.update(a.g)),b&&(a.g.input.update(),b=!1);c?(a.g.s(a.l),a.g.transition.v(a.l)):a.l.clear("rgb(0, 85, 170)");window.requestAnimationFrame(d=>J(a,d))}function qa(a){var b=new ra,c=sa;void 0!=a&&a(b.g);void 0!=c&&I(b.g,c);J(b,0)}
class ra{constructor(){var a=new Map([["left",{keys:["ArrowLeft"]}],["right",{keys:["ArrowRight"]}],["up",{keys:["ArrowUp"]}],["down",{keys:["ArrowDown"]}],["jump",{keys:["Space","KeyZ","ArrowUp"]}],["start",{keys:["Enter"]}],["select",{keys:["Enter","Space"]}]]);this.j=this.h=0;this.l=new ca;this.g=new pa(a,this.l)}};const na="00000000 000000ff 555555ff aaaaaaff ffffffff aa5555ff ffaa55ff 55aa00ff aaff00ff ffaa00ff ffff55ff 5555aaff aaaaffff aa0000ff 005500ff 0055aaff 55aaffff ffff00ff".split(" "),ta="1078 1078 1560 1560 1560 0FG4 1560 1560 1340 1D60 1560 1D90 19A0 19A0 19A0 19A0 14C0 14C0 19A0 19A0 19A0 19A0 1BC0 1BC0 14C0 14C0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 1BC0 14D0 19D0 14D0 14D0 1BC0 14C0 14D0 14D0 0400 0400 1D00 1D00 1430 1230 1870 1E70 1D00 1D00 1230 1230 1E70 1E70 000A 000A 000A 000A 000A 000A".split(" "),
ua=(a,b,c)=>{let d=b/(b/6);a.clearRect(0,0,b,c);a.fillStyle="#ffffff";for(let g=0;g<b;++g){var e=Math;var f=g/b;e=c/2+e.ceil.call(e,10*(1-Math.abs(Math.sin(f*d*Math.PI))+Math.sin(f*Math.PI*2)));a.fillRect(g,e,1,c-e)}},va=(a,b,c)=>{a.font="bold 18px Arial";a.textAlign="center";a.fillStyle="#ffffff";a.fillText("Game Over!",b/2,c-2)},wa=(a,b)=>{a.textAlign="center";a.font="bold 12px Arial";a.fillText("A TOTALLY AWESOME",b/2,32);a.font="bold 16px Arial";a.fillText("JS13K 2023",b/2,50);a.font="bold 24px Arial";
a.fillText("WARMUP",b/2,72);a.fillText("GAME",b/2,92)};const K=(a,b,c,d,e,f,g=0)=>{let h=f.length;0<g&&(a.fillColor("rgba(0, 0, 0, 0.33)"),a.fillRect(b+g,c+g,d,e));for(g=0;g<h;++g)a.fillColor(f[g]),a.fillRect(b+g,c+g,d-2*g,e-2*g)},xa=(a,b,c,d)=>{var e="WOULD YOU LIKE;TO ENABLE AUDIO?;PRESS ENTER TO;CONFIRM.;;WARNING: YOU;CANNOT CHANGE;THIS LATER!".split(";");let f=8*Math.max(...e.map(h=>h.length));e=12*e.length;c-=f/2;let g=64-e/2;K(a,c-3,g-3,f+6,e+6,d,4);x(a,b,"WOULD YOU LIKE\nTO ENABLE AUDIO?\nPRESS ENTER TO\nCONFIRM.\n\nWARNING: YOU\nCANNOT CHANGE\nTHIS LATER!",
c+1,g+1,0,4)};class ya{constructor(a){this.g=0;this.active=!1;this.isActive=()=>this.active;this.buttons=a.map((b,c)=>a[c].clone());this.h=Math.max(...this.buttons.map(b=>b.ka().length));this.active=!0}ca(a=this.g){this.g=a%this.buttons.length;this.active=!0}update(a){if(this.active){var b=this.g;3==D(a.input,"up")?--this.g:3==D(a.input,"down")&&++this.g;b!=this.g&&(b=this.buttons.length,this.g=(this.g%b+b)%b,F(a.audio,a.O("choose"),.6));if(3==D(a.input,"select")||3==D(a.input,"start"))this.buttons[this.g].ma(a),
F(a.audio,a.O("select"),.6)}}v(a,b=0,c=0,d=12,e=!0,f,g=0){if(this.active){var h=[a.B("font"),a.B("fontYellow")],k=8*(this.h+1),l=this.buttons.length*d;b=b+a.width/2-k/2;c=c+a.height/2-l/2;e&&(void 0==f&&(f=["#ffffff","#000000","#0055aa"]),K(a,b-2,c-2,k+4,l+4,f,g));for(e=0;e<this.buttons.length;++e)x(a,h[Number(e==this.g)],this.buttons[e].ka(),b+2,c+2+e*d)}}};class L{constructor(a,b){this.ka=()=>this.text;this.ma=c=>{this.h(c)};this.text=a;this.h=b}clone(){return new L(this.text,this.h)}};function M(a,b=!1){var c=a.width/2;let d=Math.random()*c|0,e=b?1:2*Math.random()|0,f=0;for(let g=0;g<a.width;++g)1==e&&++f,a.h[g]=e,a.l[g]=!1,0>=--d&&(d+=Math.random()*c+1|0,1==e?(e=b||.5>Math.random()?2:0,!b&&g+d>=a.width-1&&(e=0)):e=1);if(!b)for(b=Math.random()*f/2|0,c=Math.random()*c|0;c<a.width&&!(1==a.h[c]&&.25>Math.random()&&(a.l[c]=!0,0>=--b));++c);}
class N{constructor(a,b,c=!1,d=!1){this.j=!1;this.S=()=>this.g;this.ea=e=>{var f=this.width;return this.h[(e%f+f)%f]};this.da=e=>{var f=this.width;return this.l[(e%f+f)%f]};this.g=a;this.width=b;this.h=Array(b);this.l=Array(b);d?this.h.fill(0):M(this,c);this.j=c||d}update(a,b){this.g+=a*b.step;return this.g>b.T+48?(this.g-=b.T+96,M(this),this.j=!1,!0):!1}v(a,b){let c=Math.round(this.g);var d;for(let g=0;g<this.width;++g){y(a,0);var e=this.h[g];if(0!=e)if(2==e)for(e=0;2>e;++e)w(a,b,16*g+8*e,c+-5,32,
0,8,16);else{if(this.l[g])for(d=0;2>d;++d)w(a,b,16*g+8*d,c-8,16,8,8,8);var f=0==g?1:this.h[g-1];d=g==this.width-1?1:this.h[g+1];f=f!=e?8:0;w(a,b,16*g,c,f,0,8,8);w(a,b,16*g,c,f+16,0,8,8);w(a,b,16*g,c+8,f,8,8,8);f=d!=e?8:0;d!=e&&y(a,1);w(a,b,16*g+8,c,f,0,8,8);w(a,b,16*g+8,c,f+16,0,8,8);w(a,b,16*g+8,c+8,f,8,8,8)}}}aa(a,b,c){if(!a.Y()&&a.$()){var d=new p(8,4),e=new p;for(let g=0;g<this.width;++g)if(0!=this.h[g]){if(this.l[g]){var f=new p(16*g+8,this.g-2);if(a.ja(f,e,d))return O(a,16*g+8,c),!0}P(a,16*
g,this.g,16,b,c)}return!this.j&&a.S().y+8<this.g?this.j=!0:!1}}};function Q(a,b,c,d){a.g+=b;b=Math.min(c,d);c=Math.max(c,d);a.g<b?a.g=c:a.g>c&&(a.g=b)}function R(a,b,c,d,e){let f=Math.sign(c-b);if(0>=d)Q(a,f,b,c);else for(a.h+=e;a.h>=d;)a.h-=d,Q(a,f,b,c)}class za{constructor(){this.h=this.g=0;this.l=()=>this.g}};function P(a,b,c,d,e,f,g=!1,h=0){if(a.l||!a.g)return!1;let k=a.i.y+a.J.y+a.G.y/2;e=k+(a.speed.y+e)*f.step;if(!(h=a.speed.y<h)){a:{let l;for(let m=-1;1>=m;++m)if(h=a.i.x+a.J.x-a.G.x/2+f.D*m,l=h+a.G.x,l>=b&&h<b+d){b=!0;break a}b=!1}h=!b}return h?!1:k<c+2&&e>c-2?(a.i.y=c-(a.J.y+a.G.y/2),g||(a.speed.y=0),a.ga(g),!0):!1}function S(a){a.l=!1;a.g=!1}
class T{constructor(a=0,b=0,c=!1){this.l=!1;this.$=()=>this.g;this.Y=()=>this.l;this.ja=(d,e,f)=>this.g&&this.i.x+this.J.x+this.G.x/2>=d.x+e.x-f.x/2&&this.i.x+this.J.x-this.G.x/2<=d.x+e.x+f.x/2&&this.i.y+this.J.y+this.G.y/2>=d.y+e.y-f.y/2&&this.i.y+this.J.y-this.G.y/2<=d.y+e.y+f.y/2;this.ia=d=>this.ja(d.i,d.J,d.G);this.S=()=>this.i.clone();this.i=new p(a,b);this.speed=new p;this.target=new p;this.u=new p(1,1);this.J=new p;this.G=new p;this.h=new za;this.g=c}I(){}ba(){return!0}update(a,b){if(this.g){this.l?
this.ba(a,b)&&(this.g=!1):this.I(a,b);var c=this.speed.x,d=this.target.x,e=this.u.x*b.step;this.speed.x=c<d?Math.min(d,c+e):Math.max(d,c-e);c=this.speed.y;d=this.target.y;e=this.u.y*b.step;this.speed.y=c<d?Math.min(d,c+e):Math.max(d,c-e);this.i.x+=this.speed.x*b.step;this.i.y+=(this.speed.y+1*a)*b.step}}v(){}ga(){}}function U(a,b){for(let c of a)if(!c.$())return c;return a[a.push(new b.prototype.constructor)-1]};class Aa extends T{constructor(){super(0,0,!1);this.j=0;this.G=new p(12,12)}I(a,b){R(this.h,0,3,6,b.step);this.i.y-8>b.T&&(this.g=!1)}ba(a,b){return 12<=(this.j+=b.step)}X(a,b){this.i=new p(a,b);this.i=this.i.clone();this.h.g=0;this.l=!1;this.g=!0}v(a,b){if(this.g)if(this.l){var c=.25+this.j/12*.75;B(a);a.fillColor("#ffff00");b=this.i.x;var d=this.i.y,e=c*c*16;c*=16;var f=a.H;if(!(e>=c))for(b+=a.F.x,d+=a.F.y,b|=0,d|=0,a=-c;a<=c;++a){var g=a/c;g=Math.round(Math.sqrt(1-g*g)*c);if(!(0>=g)){var h=0;Math.abs(a)<
e&&(h=a/e,h=Math.round(Math.sqrt(1-h*h)*e));0>=h?f.fillRect(b-g,d+a,2*g,1):(f.fillRect(b-g,d+a,g-h,1),f.fillRect(b+h,d+a,g-h,1))}}}else d=this.h.l(),e=[0,16,24,16][d],c=[16,8,8,8][d],f=Math.round(this.i.x)-c/2,g=Math.round(this.i.y)-8,y(a,3==d?1:0),w(a,b,f,g,e,16,c,16),a.V=0,a.U=0}aa(a,b){return!this.g||this.l||a.Y()||!a.$()?!1:this.ia(a)?(this.l=!0,this.j=0,F(b.audio,b.O("coin"),.5),!0):!1}};function V(a,b,c=0){c=Math.round(a.i.x)+c;let d=Math.round(a.i.y)+0,e=Math.round(a.j*a.size/2);b.fillColor(a.color);u(b,c,d,e)}class Ba extends T{constructor(){super(0,0,!1);this.size=this.m=this.j=0;this.color="#ffffff"}X(a,b,c,d,e="#ffffff"){this.i=new p(a,b);this.i=this.i.clone();this.size=c;this.m=d;this.color=e;this.j=1;this.g=!0}I(a,b){0>=(this.j-=this.m*b.step)&&(this.g=!1)}v(a){this.g&&(8>this.i.x?V(this,a,a.width):this.i.x>=a.width-8&&V(this,a,-a.width),V(this,a))}};function O(a,b,c){a.l=!0;a.h.g=0;a.speed.x=.25*(a.i.x-b);a.speed.y=-4;a.target.x=0;a.u.x=.025;F(c.audio,c.O("die"),.7)}
function W(a,b,c,d=0){var e=a.h.l();d=Math.round(a.i.x)-8+d;let f=Math.round(a.i.y)-8+1;y(b,a.L);if(a.l)z(b,a.h.l()),w(b,c,d,f,32,16,16,16);else if(6<=e)e-=6,1==a.L&&(e=3-e),z(b,e),w(b,c,d,f,0,48,16,16);else{var g=6+a.A;1==a.L&&(g-=4);w(b,c,d,f,[32,0,0,0,0,0][e],[16,32,32,32,32,32][e],16,8);w(b,c,d,f+8,[32,16,32,16,32,0][e],[24,32,32,40,40,40][e],16,8);w(b,c,d+g,f+5,24,8,8,8)}b.V=0;b.U=0}
class Ca extends T{constructor(a=0){super(a,88,!0);this.o=this.A=this.L=0;this.s=!1;this.j=0;this.C=this.m=this.M=!1;this.P=this.Z=0;this.u=new p(.15,.15);this.G=new p(8,12);this.J.y=2;this.N=[]}I(a,b){a:{var c=0;0!=(D(b.input,"right")&1)?c=1:0!=(D(b.input,"left")&1)&&(c=-1);0!=c&&(this.A=c);this.target.x=1.5*c;this.target.y=2;c=D(b.input,"down");let d=D(b.input,"jump"),e=b.O("jump");this.C||3!=c||this.s||(this.C=!0,this.m=!1);if(this.C)if(0==(c&1))this.C=!1;else{this.speed.y=4;this.target.y=4;this.j=
0;this.m=!1;break a}if(this.m){if(1==(d&1)){this.j+=8;this.m=!1;break a}1==c&&(this.Z=this.j+8,this.j=0,this.m=!1)}(0<this.o||this.M)&&3==d?(this.j=0<this.o?20:12,this.s=!1,this.M=0<this.o,this.o=0,F(b.audio,e,.7)):this.m||0!=(d&1)||(this.j=0)}0<this.j&&(this.speed.y=-(2+a),this.j-=b.step,0>=this.j&&(this.m=!1));0<this.Z&&(this.speed.y=-(2+a),0>=(this.Z-=b.step)&&(this.m=!1));0<this.o&&(this.o-=b.step);c=Math.abs(this.speed.x);0!=this.A&&(this.L=1==this.A?0:1);this.s?.01>c?this.A=this.h.g=0:R(this.h,
1,4,10-4*c,b.step):!this.M&&-1>this.speed.y?R(this.h,6,9,3,b.step):this.h.g=5;c=1/24;for(let d of this.N)d.update(a,b);!(this.s&&.01>Math.abs(this.speed.x))&&4<=(this.P+=b.step)&&(this.P-=4,U(this.N,Ba).X(this.i.x,this.i.y+6,10,c,"#ffffaa"));0>this.i.x?this.i.x+=b.D:this.i.x>b.D&&(this.i.x-=b.D);this.i.y>b.T+8&&O(this,this.i.x,b);this.s=!1}ga(a){this.m=a;this.C=!1;this.M=!0;a?this.j=8:(this.s=!0,this.o=8)}ba(a,b){R(this.h,0,3,4,b.step);this.target.y=8;for(let c of this.N)c.update(a,b);return this.i.y>=
b.T+8}v(a,b){this.g&&(8>this.i.x?W(this,a,b,a.width):this.i.x>=a.width-8&&W(this,a,b,-a.width),W(this,a,b))}};class Da extends T{constructor(){super(0,0,!1);this.m=this.j=this.M=this.L=this.C=this.o=this.N=0;this.s=!0;this.A=!1;this.P=void 0;this.u.y=.1;this.G=new p(8,8)}ba(a,b){this.target.y=6;return this.i.y-8>b.T}I(a,b){if(this.i.y-8>b.T)this.g=!1;else{var c=[0,.5,.33,0,0],d=this.P?.S()-8;this.A=-8>this.i.y;switch(this.o){case 2:case 1:this.speed.x=a*c[this.o]*this.j;this.target.x=this.speed.x;this.C=1==this.j?1:0;break;case 3:this.s?0<=this.i.y&&30<=(this.m+=b.step)&&(this.speed.y=-2.5,this.target.y=
4,this.s=!1,this.m-=30):0<this.speed.y&&this.i.y>=d&&this.i.y<d+16&&(this.i.y=d,n(this.speed),n(this.target),this.s=!0);break;case 4:if(!(-8>this.i.y))if(0<this.m)this.A=!0,this.speed.x=0,this.m-=a*b.step,0>=this.m&&(this.speed.x=0,this.target.x=10*this.j);else if(this.u.x=.015*(a+1),0<this.j&&this.i.x>=b.D+8||0>this.j&&-8>this.i.x)this.g=!1}0>this.speed.x&&this.i.x<this.L&&(this.speed.x*=-1,this.j*=-1,this.i.x=this.L);0<this.speed.x&&this.i.x>this.M&&(this.speed.x*=-1,this.j*=-1,this.i.x=this.M);
c=[0,6,10,0,4];d=2*Math.PI/60;switch(this.o){case 2:this.m=(this.m+d*b.step)%(2*Math.PI),this.N=Math.round(2*Math.sin(this.m));case 1:R(this.h,0,1,c[this.o]-2*a|0,b.step);break;case 4:R(this.h,0,1,c[4],b.step);break;case 3:this.h.g=1,!this.s&&.5<Math.abs(this.speed.y)&&(this.h.g=0<this.speed.y?2:0)}}}X(a,b,c,d,e=a,f=a){this.i=new p(a,b.S()+[0,-8,-16,-8,0][c]);this.N=0;n(this.speed);n(this.target);this.h.g=0;this.o=c;this.L=e;this.M=f;this.P=b;this.s=!0;3!=c&&(this.j=.5>Math.random()?-1:1,this.C=1==
this.j?1:0);4==c&&(this.m=150*Math.random()|0,this.i.x=0<this.j?-8:d.D+8,this.i.y-=16);this.A=!1;this.g=!0;this.l=!1}v(a,b){if(this.g){var c=this.h.l(),d=Math.round(this.i.x)-8,e=Math.round(this.i.y)-8+this.N;var f=this.C;var g=0;this.l&&(f|=2,g=1);y(a,f);switch(this.o){case 1:f=0==c?16:32;c=0==c?56:48;w(a,b,d,e+1+8*g,16,48,16,8);w(a,b,d,e+1+8*(1-g),f,c,16,8);break;case 2:w(a,b,d,e+4,0,0==c?64:72,16,8);break;case 3:a.fillColor("#000000");w(a,b,d,e+2,32,64,16,16);e+=c-1;w(a,b,d,e+4+5*g,32,56,16,8);
w(a,b,d+4,e+7-g,24,8,8,8);e+=c-1+4*g;a.fillRect(d+5,e+8,1,1);a.fillRect(d+10,e+8,1,1);break;case 4:w(a,b,d,e+2-4*g,16,64,16,16),1!=c||this.l||w(a,b,d+4-12*this.j,e+4,40,8,8,8)}a.V=0;a.U=0}}aa(a,b,c){return!this.g||!a.$()||this.l||a.Y()||this.A?!1:P(a,this.i.x+this.J.x-10,this.i.y+-6,20,b,c,!0,-1)?(this.l=!0,n(this.speed),n(this.target),this.speed.y=1,F(c.audio,c.O("kill"),.7),!0):a.ia(this)?(O(a,this.i.x,c),!0):!1}};class Ea extends T{constructor(){super(0,0,!1);this.size=this.j=0;this.color="#ffffff";this.u.y=.25}X(a,b,c,d,e="#ffffff"){this.i=new p(a,b);this.i=this.i.clone();this.speed=new p(c,d);this.target=new p(c,8);this.j=0;this.color=e;this.size=1+(4*Math.random()|0);this.g=!0}I(a,b){120<=(this.j+=b.step)?this.g=!1:this.i.y>b.T+8&&(this.g=!1)}v(a){if(this.g){var b=Math.round(this.i.x),c=Math.round(this.i.y),d=this.size+1;B(a,Math.max(0,1-this.j/120));a.fillColor(this.color);a.fillRect(b-d/2,c-d/2,d,d);
B(a)}}};function X(a,b,c){let d=2*Math.PI/12,e=d/2,f,g;for(let h=0;12>h;++h)g=1+3*Math.random(),f=e+h*d,U(a.m,Ea).X(b.x,b.y,Math.cos(f)*g,Math.sin(f)*g+-3,c)}
class Fa{constructor(a){this.u=0;this.s=()=>this.g.Y();this.o=[];for(let b=0;6>b;++b)this.o[b]=new N(48*b,a.D/16|0,2==b,2<b);this.l=[];this.h=[].fill(!1);this.j=[];this.m=[];this.g=new Ca(a.D/2)}update(a,b,c,d){for(var e of this.m)e.update(b,d);for(var f of this.l)f.update(b,d),f.aa(this.g,d)&&(c.R+=1);for(var g of this.j)g.update(b,d),g.aa(this.g,b,d)&&(this.g.Y()?X(this,this.g.S(),"#ffffff"):(X(this,g.S(),"#aa0000"),c.R+=1));for(let v of this.o)if(v.aa(this.g,b,d)&&(this.g.Y()?X(this,this.g.S(),
"#ffffff"):c.W+=(c.R+10)/10*10|0),v.update(b,d)){e=a;g=v;f=d;for(var h=0;h<this.h.length;++h)this.h[h]=!1;h=g;var k=[.25,.5,.2,.05];var l=E(k,k,1);if(0!=l){var m=f.D/16|0;for(let A=0;A<l;++A){var q=k=Math.random()*m|0;do{if(!this.h[q]&&!h.da(q)){U(this.l,Aa).X(16*q+8,h.S()-24+8);this.h[q]=!0;break}q=(q+1)%m}while(q!=k)}}k=h=void 0;e=E([.5,.3,.05,.15,0],[.2,.2,.2,.2,.2],Math.min(1,e/7200));if(0!=e){q=f.D/16|0;m=l=Math.random()*q|0;do{if(!this.h[m]&&(2==e||0!=g.ea(m)&&!g.da(m))){if(1==e){for(k=m;0<=
k&&0!=g.ea(k)&&!g.da(k);--k);for(h=m;h<=q-1&&0!=g.ea(h)&&!g.da(h);++h);[k,h]=[k,h];2==Math.abs(k-h)&&(e=3)}else 2==e&&(k=-1,h=q);U(this.j,Da).X(16*m+8,g,e,f,16*(k+1),16*h);break}m=(m+1)%q}while(m!=l)}}this.g.update(b,d);this.u=(this.u+.125*d.step)%d.D;return!this.g.$()}v(a){let b=a.B("bmp1");for(var c of this.o)c.v(a,b);c=this.g;if(c.g)for(let d of c.N)d.v(a);for(let d of this.m)d.v(a);for(let d of this.j)d.v(a,b);for(let d of this.l)d.v(a,b);this.g.v(a,b)}};function Y(a){if(!(a.W<a.g)){a.g=a.W;try{window.localStorage.setItem("js13kwarmup__hiscore",String(a.g))}catch(b){console.log("Could not access the local storage: "+String(b))}}}class Ga{constructor(){this.g=this.R=this.W=0;this.l=()=>this.W;this.h=()=>this.g;let a=0;try{a=Number(window.localStorage.getItem("js13kwarmup__hiscore"))}catch(b){console.log("Could not access the local storage: "+String(b))}this.g=a}};function Ha(a,b){a.C=a.j.s()?0:60>a.l?.5:Math.min(2,.5+.25*Math.floor((a.l-60)/1800));a.m=a.C>a.m?Math.min(a.C,a.m+.01*b.step):Math.max(a.C,a.m-.01*b.step)}function Ia(a,b){a.A=(a.A+b.step)%60;3==D(b.input,"start")&&(F(b.audio,b.O("start"),.7),a.I=!0)}
class Z{constructor(a,b){this.m=0;this.C=.5;this.o=this.l=0;this.u=this.s=!1;this.h=0;this.I=!1;this.A=29;this.j=new Fa(b);this.g=new Ga}update(a){if(!a.transition.isActive())if(this.I){var b=3==D(a.input,"start");b&&!this.u&&(this.s=!this.s,F(a.audio,a.O("pause"),.7));this.s||(this.l+=a.step,Ha(this,a),this.j.update(this.l,this.m,this.g,a),0<this.o&&(this.o-=a.step),this.u?(this.h+=a.step,b&&30<=this.h&&(F(a.audio,a.O("start"),.7),a.transition.ca(!0,1,1/30,c=>{var d=this.g;d.W=0;d.R=0;d=this.j;for(let f=
0;6>f;++f)d.o[f]=new N(48*f,c.D/16|0,2==f,2<f);for(var e of d.l)S(e);for(let f of d.j)S(f);for(let f of d.m)S(f);e=d.g;c=c.D/2;e.L=0;e.A=0;e.o=0;e.s=!1;e.j=0;e.M=!1;e.m=!1;e.C=!1;e.Z=0;e.i=new p(c,88);e.speed=new p;e.target=new p;e.g=!0;e.l=!1;e.h.g=0;e.u.x=.15;e.P=0;for(let f of e.N)S(f);d.h.fill(!1);this.o=this.m=this.l=0;this.u=!1;this.h=0}))):!this.u&&this.j.s()&&(Y(this.g),this.u=!0,this.l=0,this.o=30,Y(this.g)))}else Ia(this,a)}ha(a){var b=this.j,c=a.B("clouds"),d=a.B("bmp1"),e=a.height-120;
a.clear("#55aaff");a.fillColor("#aaffff");u(a,112,64,24);a.fillColor("#55aaff");u(a,100,52,24);for(var f=0;2>f;++f)w(a,c,-(b.u|0)+f*c.width,e);e+=c.height;for(b=0;b<a.width/8;++b)w(a,d,8*b,e,40,0,8,8);e+=8;a.fillColor("#0055aa");a.fillRect(0,e,a.width,a.height-e);0<this.o&&a.move(4*(2*Math.random()-1),4*(2*Math.random()-1));this.j.v(a);a.moveTo();if(this.I){if(this.j.s()){d=a.B("gameover");f=a.B("font");var g=a.B("fontYellow");e=a.width/2-d.width/2;b=a.height/2-d.height/2+-32;c=1;30>this.h&&(c=this.h/
30);a.clear("rgba(0, 0, 0,"+String(.67*c)+")");if(30>this.h){c=(1-c)*(1-c);f=a.H;g=1+16*c;b+=d.height/2;for(let l=0;l<d.height;++l){var h=32*Math.sin(4*Math.PI/d.height*l+2*c*Math.PI)*c;var k=(l-d.height/2)*g;f.drawImage(d,0,l,d.width,1,e+h|0,b+k|0,d.width,1)}}else 1==((this.h%60|0)/30|0)&&x(a,g,"PRESS ENTER",a.width/2,a.height/2+56,0,0,1),w(a,d,e,b),x(a,f,"SCORE: "+this.g.l(),a.width/2,a.height/2,0,0,1),x(a,f,"HISCORE: "+this.g.h(),a.width/2,a.height/2+16,0,0,1)}else{d=a.B("font");b=a.B("bmp1");
a.fillColor("rgba(0, 0, 0, 0.33)");a.fillRect(0,0,a.width,17);e=a.width/4;w(a,b,e-10,1,0,80,20,8);c=String(this.g.W);f="";for(g=0;g<6-c.length;++g)f+="0";x(a,d,f+c,e,8,-1,0,1);e+=a.width/2;w(a,b,e-10,1,24,80,21,8);b=this.g;c=b.R%10;x(a,d,"#"+String(1+(b.R-c)/10)+"."+c,e-4,8,-2,0,1)}this.s&&(d=a.B("font"),a.clear("rgba(0, 0, 0, 0.67)"),x(a,d,"GAME PAUSED",a.width/2,a.height/2-4,0,0,1))}else{c=2*Math.PI;d=a.B("font");e=a.B("fontYellow");b=a.B("logo");f=this.A/60*c;a.clear("rgba(0, 0, 0, 0.67)");g=a.H;
if(void 0!==b)for(h=0;h<b.width;++h)k=f+h/b.width*c,k=Math.round(4*Math.sin(k)),g.drawImage(b,h,0,1,b.height,0+h,0+k,1,b.height);x(a,d,"$2023 JANI NYK%NEN",a.width/2,a.height-9,0,0,1);30<=this.A&&x(a,e,"PRESS ENTER",a.width/2,a.height-56,0,0,1)}}fa(){}};class sa{constructor(){this.g=new ya([new L("YES",a=>{a.audio.toggle(!0);a.transition.ca(!1,2,1/60,null);I(a,Z)}),new L("NO",a=>{a.audio.toggle(!1);a.transition.ca(!1,2,1/60,null);I(a,Z)})])}update(a){this.g.update(a)}ha(a){const b=["#ffffff","#000000","#5555aa"];a.clear("#0055aa");xa(a,a.B("font"),a.width/2,b);this.g.v(a,0,48,12,!0,b,4)}fa(){}};window.onload=()=>{qa(a=>{a.audio.toggle(!1);a.audio.la=.6;G(a,"bmp1","bitmap1.png",10,ta);G(a,"font","font.png",3,Array(64).fill("0004"));G(a,"fontYellow","font.png",3,Array(64).fill("000H"));H(a,"clouds",a.D,80,ua);H(a,"gameover",112,20,va,!0,192,[255,0,0]);H(a,"logo",144,128,wa,!0,96,[170,255,255]);a.K("die",[[192,4],[144,8],[96,16]],.7,"square",2,.2);a.K("jump",[[96,8],[112,7],[160,6],[256,4]],.7,"sawtooth",2,.2);a.K("coin",[[256,3],[400,4],[480,5],[512,10]],.7,"square",0,.2);a.K("kill",[[320,
4],[192,6],[96,10]],.7,"square",1,.2);a.K("pause",[[160,12]],.6,"square",1,.2);a.K("start",[[224,16]],.8,"sawtooth",1,.2);a.K("choose",[[256,4]],.8,"sawtooth",1,.2);a.K("select",[[192,8]],.8,"sawtooth",1,.2)})};
    </script>
</body>
</html>
